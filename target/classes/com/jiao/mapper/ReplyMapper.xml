<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jiao.dao.ReplyDao">
    <resultMap id="ReplyResultMap" type="com.jiao.domain.Reply">
            <id     column="rid"        property="_rid"         jdbcType="INTEGER"/>
			<result column="pid"        property="_pid"     	jdbcType="INTEGER" />
        	<result column="uid"    	property="_uid"    		jdbcType="INTEGER" />
        	<result column="cretime" 	property="_cretime" 	jdbcType="TIMESTAMP"/>
        	<result column="content"    property="_content"     jdbcType="BLOB"  typeHandler="org.apache.ibatis.type.BlobTypeHandler"/>
        	<association property="post" javaType="com.jiao.domain.Post">
        		<id     column="rid"        property="_rid"         jdbcType="INTEGER"/> 
				<result column="pid"        property="_pid"     	jdbcType="INTEGER" />  
        		<result column="uid"    	property="_uid"    		jdbcType="INTEGER" />  
        		<result column="cretime" 	property="_cretime" 	jdbcType="TIMESTAMP"/> 
        		<result column="content"    property="_content"     jdbcType="BLOB"  typeHandler="org.apache.ibatis.type.BlobTypeHandler"/>
        	</association>
        	
			<association property="user" javaType="com.jiao.domain.User">
				<id     column="userid" 	property="userId" 		jdbcType="INTEGER" />  
        		<result column="username" 	property="userName" 	jdbcType="VARCHAR" />  
        		<result column="pwd" 		property="userPassword" jdbcType="VARCHAR" />  
        		<result column="useremail" 	property="userEmail" 	jdbcType="VARCHAR" /> 
        		<result column="regtime" 	property="userRegtimestamp" jdbcType="TIMESTAMP" /> 
			</association>
    </resultMap>
    
    <insert id="addNewReply">
    	INSERT INTO reply(uid,pid,content) VALUES(#{uid,jdbcType=INTEGER},
    	#{pid,jdbcType=INTEGER},#{cont,jdbcType=BLOB})
    </insert>
    
    <select id="selectReplyBypid" resultType="com.jiao.domain.Reply">
    	SELECT * FROM reply WHERE pid=#{id}
    </select>
    
</mapper>